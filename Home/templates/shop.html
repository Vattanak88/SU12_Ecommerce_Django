{% extends 'base.html' %}

{% load static %}

{% block title %} Shopping {% endblock %}

{% block content %}

    <div class="container-fluid py-5">
        <div class="container">
            <div class="row gy-4">
                <!-- Loop through the products array -->
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" v-for="product in Products" :key="product.id">
                    <div class="product-card p-0 rounded-4 overflow-hidden shadow-sm border-0 h-100 bg-white">
  <div class="position-relative">
    <!-- Product image -->
    <img 
      :src="`static/image/clothes/${product.image}`" 
      :alt="product.name" 
      class="product-img w-100 object-fit-cover"
      style="height: 260px; transition: transform 0.3s ease;"
      @mouseenter="e => e.currentTarget.style.transform = 'scale(1.03)'"
      @mouseleave="e => e.currentTarget.style.transform = 'scale(1)'"
    >
    
    <!-- Discount badge (top-right, prominent but elegant) -->
    <span class="position-absolute top-0 end-0 bg-danger text-white fw-bold py-1 px-2 fs-6 rounded-start shadow-sm"
          style="z-index: 2;">
      <i class="fas fa-tag fs-8 me-1"></i> 39% OFF
    </span>
  </div>

  <div class="p-3">
    <!-- Product name -->
    <h6 class="mb-2 fw-semibold text-dark text-truncate" title="[[ product.name ]]">
      [[ product.name ]]
    </h6>

    <!-- Price & rating section -->
    <div class="d-flex justify-content-between align-items-center mb-2">
      <!-- Price (discounted price first, old price strikethrough) -->
      <div class="d-flex align-items-baseline gap-2">
        <span class="fs-5 fw-bold text-success">$[[ product.discount_price ]]</span>
        <span class="text-muted text-decoration-line-through fs-6">$[[ product.price ]]</span>
      </div>

      <!-- Rating -->
      <div class="d-flex align-items-center gap-1">
        <div class="text-warning">
          <span 
            v-for="i in 5" 
            :key="i"
            :class="i <= Math.floor(product.rate) ? 'fas fa-star' : i <= product.rate + 0.5 ? 'fas fa-star-half-alt' : 'far fa-star'"
            class="fs-7"
          ></span>
        </div>
        <span class="text-muted fw-medium fs-8 ms-1">([[ product.rate ]])</span>
      </div>
    </div>

    <!-- Action buttons -->
    <div class="d-grid gap-2">
      <!-- Add to Cart Button (full-width, modern style) -->
      <button 
        class="btn btn-success rounded-3 py-2 fw-semibold d-flex align-items-center justify-content-center"
        @click="addToCart(product)"
        style="background-color: rgb(179, 35, 204);border:none;"
      >
        <i class="fas fa-shopping-cart me-2"></i> Add to Cart
      </button>

      <!-- Detail Button (outline, subtle) -->
      <button 
        type="button" 
        class="btn btn-outline-secondary rounded-3 py-2 fw-medium"
        @click="product_detail(product)" 
        data-bs-toggle="modal" 
        data-bs-target="#staticBackdrop"
      >
        <i class="fas fa-info-circle me-1"></i> View Details
      </button>
    </div>
  </div>
                </div>
                </div>
            </div>
        </div>
    </div>



        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body p-3">
                  <div class="row">
                        <!-- Product Image -->
                        <div class="col-lg-6">
                            <img :src="`static/image/clothes/${image}`"
                                 :alt="title" class="product-img rounded shadow-sm" style="width:100%;object-fit: cover">
                        </div>

                        <!-- Product Info -->
                        <div class="col-lg-6">
                            <h2 class="fw-bold">[[ name ]]</h2>
                            <h6 class="fw-semibold">
                                <span>Category : </span>
                                <span>[[ category ]]</span>
                            </h6>
                            <div class="d-flex align-items-center mb-2 text-danger" style="font-size: 12px;">
                                <span class="">([[ rate ]] Reviews)</span>
                            </div>
                            <div class="mb-3">
                                <p class="m-0 p-0 fw-semibold" style="font-size: 20px;">
                                    <span class="discount-price">$[[ price ]]</span>
                                    <span class="text-danger ms-2">
                                        <del>
                                            $[[ discount_price ]]
                                        </del>
                                    </span>
                                </p>
                            </div>
                            <p>[[ description ]]</p>
                            <div class="mt-3">
                                <button class="btn btn-danger btn-md me-2 my-3" @click="test

                                ()">
                                    <i class="fas fa-cart-plus me-1"></i> Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
              </div>
            </div>
          </div>
        </div>

 

    </div>


{% endblock %}